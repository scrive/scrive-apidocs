{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "version": "1.9.2",
  "type": "object",
  "properties": {
    "id": {
      "type": "string"
    , "read_only": true
    },
    "title": {
      "type": "string"
    },
    "file": {
      "anyOf" : [
        { "type": "null" }
      , { "$ref": "#/definitions/file_def" }
      ]
    , "read_only": true
    },
    "sealed_file": {
      "anyOf": [
        { "type": "null" }
      , { "$ref": "#/definitions/file_def" }
      ]
    , "read_only": true
    },
    "author_attachments": {
      "type": "array",
      "items": {
        "anyOf": [
          { "type": "null"}
        , { "$ref": "#/definitions/file_def" }
        ]
      }
    , "read_only": true
    },
    "mtime": {
      "type": "string",
      "format": "date-time"
    , "read_only": true
    },
    "ctime": {
      "type": "string",
      "format": "date-time"
    , "read_only": true
    },
    "timeout_time": {
      "anyOf": [
        { "type": "null"}
      , { "type": "string", "format": "date-time" }
      ]
    , "read_only": true
    },
    "auto_remind_time": {
      "anyOf": [
        { "type": "null"}
      , { "type": "string", "format": "date-time" }
      ]
    , "read_only": true
    },
    "status": {
      "$ref": "#/definitions/document_status"
    , "read_only": true
    },
    "viewer": {
      "type": "object",
      "properties": {
        "role": {
          "type": "string", "enum": ["company_admin", "signatory"]
        },
        "signatory_id": {
          "oneOf": [
            { "type": "null"}
          , { "type": "string", "pattern": "^[0-9]+$" }
          ]
        }
      }
    , "read_only": true
    },
    "signatories": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          , "read_only": true
          },
          "user_id": {
            "anyOf": [
               { "type": "null" }
             , { "type": "string" }
             ]
          , "read_only": true
          },
          "sign_order": {
            "type": "integer"
          },
          "sign_time": {
            "anyOf": [
              { "type": "null"}
            , { "type": "string", "format": "date-time" }
            ]
          , "read_only": true
          },
          "seen_time": {
            "anyOf": [
              { "type": "null"}
            , { "type": "string", "format": "date-time" }
            ]
          , "read_only": true
          },
          "read_invitation_time": {
            "anyOf": [
              { "type": "null"}
            , { "type": "string", "format": "date-time" }
            ]
          , "read_only": true
          },
          "rejected_time": {
            "anyOf": [
              { "type": "null"}
            , { "type": "string", "format": "date-time" }
            ]
          , "read_only": true
          },
          "csv": {
            "anyOf": [
               { "type": "null" }
             , { "type": "array"
               , "items": { "type": "array"
                          , "items": { "type": "string" }
                          }
               }
             ]
          , "read_only": true
          },
          "is_author": {
            "type": "boolean"
          , "read_only": true
          },
          "is_signatory": {
            "type": "boolean"
          },
          "delivery_method": {
            "type": "string",
            "enum": [
              "email"
            , "pad"
            , "api"
            , "mobile"
            , "email_mobile"
            ],
            "default": "email"
          },
          "api_delivery_url": {
            "anyOf": [
              { "type": "null" }
            , { "type": "string", "format": "uri" }
            ]
          },
          "email_delivery_status" : {
            "$ref": "#/definitions/delivery_status"
          , "read_only": true
          },
          "mobile_delivery_status" : {
            "$ref": "#/definitions/delivery_status"
          , "read_only": true
          },
          "authentication_method": {
            "type": "string",
            "enum": [
              "standard"
            , "sms_pin"
            , "sv_bankid"
            ],
            "default": "standard"
          },
          "confirmation_delivery_method": {
            "type": "string",
            "enum": [
              "email"
            , "mobile"
            , "email_mobile"
            , "none"
            ],
            "default": "email"
          },
          "sign_success_redirect_url": {
            "anyOf": [
              { "type": "null" }
            , { "type": "string", "format": "uri" }
            ]
          },
          "reject_redirect_url": {
            "anyOf": [
              { "type": "null" }
            , { "type": "string", "format": "uri" }
            ]
          },
          "attachments": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": { "type": "string" }
              , "description": { "type": "string" }
              , "file": { "anyOf": [
                            { "type": "null"}
                          , { "$ref": "#/definitions/file_id" }
                          ]
                        }
              }
            }
          , "read_only": true
          },
          "fields": {
            "type": "array",
            "items": {
              "oneOf" : [
                 { "$ref": "#/definitions/field_name" }
               , { "$ref": "#/definitions/field_standard" }
               , { "$ref": "#/definitions/field_text" }
               , { "$ref": "#/definitions/field_signature" }
               , { "$ref": "#/definitions/field_checkbox" }
               ]
            }
          }
        }
      }
    },
    "is_template": {
      "type": "boolean",
      "default": false
    },
    "days_to_sign": {
      "type": "integer"
    },
    "days_to_remind": {
      "anyOf": [
        { "type": "null" }
      , { "type": "integer" }
      ]
    },
    "display_options" : {
      "type": "object",
      "properties": {
        "show_header": {
          "type": "boolean",
          "default": true
        },
        "show_pdf_download": {
          "type": "boolean",
          "default": true
        },
        "show_reject_option": {
          "type": "boolean",
          "default": true
        },
        "show_footer": {
          "type": "boolean",
          "default": true
        }
      }
    },
    "invitation_message": {
      "type": "string"
    },
    "confirmation_message": {
      "type": "string"
    },
    "lang": {
      "type": "string",
      "enum": [
        "sv"
      , "en"
      , "de"
      , "fr"
      , "it"
      , "es"
      , "pt"
      , "nl"
      , "da"
      , "no"
      , "el"
      , "fi"
      ]
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": { "type": "string" }
        , "value": { "type": "string" }
        }
      }
    },
    "api_callback_url": {
      "anyOf": [
        { "type": "null" }
      , { "type": "string", "format": "uri" }
      ]
    },
    "is_saved": {
      "type": "boolean"
    },
    "is_trashed": {
      "type": "boolean"
    , "read_only": true
    },
    "is_deleted": {
      "type": "boolean"
    , "read_only": true
    },
    "object_version": {
      "type": "integer"
    , "read_only": true
    },
    "access_token": {
      "type": "string"
    , "read_only": true
    },
    "timezone": {
      "type": "string"
    }
  },
  "definitions": {
    "delivery_status": {
      "type": "string",
      "enum": [
        "unknown"
      , "not_delivered"
      , "delivered"
      , "deferred"
      ]
    },
    "file_id": {
      "type": "string"
    },
    "file_def": {
      "type": "object",
      "properties": {
        "id": { "$ref": "#/definitions/file_id" },
        "name": {
          "type": "string"
        }
      }
    },
    "field_common": {
      "type": "object",
      "properties": {
        "is_obligatory": {
          "type": "boolean"
        },
        "should_be_filled_by_sender": {
          "type": "boolean"
        },
        "placements": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "xrel": {
                "type": "number"
              },
              "yrel": {
                "type": "number"
              },
              "wrel": {
                "type": "number"
              },
              "hrel": {
                "type": "number"
              },
              "fsrel": {
                "type": "number"
              },
              "page": {
                "type": "integer"
              },
              "tip": {
                "type": "string",
                "enum": ["left", "right"]
              },
              "anchors": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "text": {
                      "type": "string"
                    },
                    "index": {
                      "type": "integer"
                    },
                    "pages": {
                      "type": "array",
                      "items": {
                        "type": "integer"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "field_name": {
      "allOf": [
        { "properties": {
            "type": {
              "type": "string",
              "enum": [ "name" ]
            },
            "order": {
              "type": "integer"
            },
            "value": {
              "type": "string"
            }
          }
        }
        , { "$ref": "#/definitions/field_common" }
      ]
    },
    "field_standard": {
      "allOf": [
        { "properties": {
            "type": {
              "type": "string",
              "enum": [ "company"
                      , "company_number"
                      , "email"
                      , "mobile"
                      , "personal_number"
                      ]
            },
            "value": {
              "type": "string"
            }
          }
        }
        , { "$ref": "#/definitions/field_common" }
      ]
    },
    "field_text": {
      "allOf": [
        { "properties": {
            "type": {
              "type": "string",
              "enum": [ "text" ]
            },
            "name": {
              "type": "string"
            },
            "value": {
              "type": "string"
            }
          }
        }
        , { "$ref": "#/definitions/field_common" }
      ]
    },
    "field_signature": {
      "allOf": [
        { "properties": {
            "type": {
              "type": "string",
              "enum": [ "signature" ]
            },
            "signature": {
              "oneOf" : [
                { "type": "null" }
              , { "$ref": "#/definitions/file_id" }
              ]
              , "read_only": true
            }
          }
        }
        , { "$ref": "#/definitions/field_common" }
      ]
    },
    "field_checkbox": {
      "allOf": [
        { "properties": {
            "type": {
              "type": "string",
              "enum": [ "checkbox" ]
            },
            "is_checked": {
              "type": "boolean"
            }
          }
        }
        , { "$ref": "#/definitions/field_common" }
      ]
    },
    "document_status": {
      "type": "string",
      "enum": [
        "preparation"
      , "pending"
      , "closed"
      , "canceled"
      , "timedout"
      , "rejected"
      , "document_error"
      ]
    }
  }
}
