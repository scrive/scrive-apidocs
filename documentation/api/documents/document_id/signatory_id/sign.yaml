---
post:

  summary: Sign a document

  tags:
    - Sign
    - Internal

  description: |
    Sign a document for the given signatory.

  parameters:
    - $ref: ../../../../parameters.yaml#/DocumentID
    - $ref: ../../../../parameters.yaml#/SignatoryID
    - $ref: ../../../../parameters.yaml#/SignParamFields
    - $ref: ../../../../parameters.yaml#/SignParamAuthType
    - $ref: ../../../../parameters.yaml#/SignParamAuthValue
    - $ref: ../../../../parameters.yaml#/SignParamSMSPIN
    - $ref: ../../../../parameters.yaml#/SignParamAcceptedAttachments
    - name: screenshots
      in: formData
      type: string
      format: application/json
      # TODO schema $ref: '#/definitions/Screenshots'
      description: |
        The screenshots and/or reference screenshots to use for the Evidence of
        Intent as part of the Evidence Package.
    - $ref: ../../../../parameters.yaml#/ObjectVersion

  responses:
    200:
      $ref: ../../../../responses.yaml#/Document
    409:
      description: TODO
      # TODO
      # document_state_error; The document is not pending.
      # signatory_state_error; The signatory has already signed.
      # request_parameters_invalid; The (‘authentication_type’ and/or the ‘authentication_value’) do not match with values set in the document.
      # request_parameters_invalid; The SMS PIN is not correct.
      # signatory_state_error; The signatory has not provided a valid eID signature.
      # signatory_state_error; Some mandatory author attachments aren't accepted.
      # FIXME It is possible to add a schema here, although APIError is too general
